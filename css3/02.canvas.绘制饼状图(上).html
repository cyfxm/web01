<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>饼状图 数据统计</title>
    <style>
        canvas {
            background-color: #ccc;
        }
    </style>
</head>

<body>

    <canvas id="canvas">不支持canvas标签！</canvas>

    <script>
        // 1.0 获取canvas标签
        var canvas = document.getElementById("canvas");
        // 2.0 设置画布的大小
        canvas.width = 800;
        canvas.height = 800;
        // 3.0 获取canvas上下文对象
        var ctx = canvas.getContext('2d');
        // 4.0 假数据
        var data = [
            { "date": "一月份", "persent": "0.3", "color": "red" },
            { "date": "二月份", "persent": "0.2", "color": "green" },
            { "date": "三月份", "persent": "0.05", "color": "blue" },
            { "date": "四月份", "persent": "0.35", "color": "orange" },
            { "date": "五月份", "persent": "0.1", "color": "purple" }
        ]
        // 绘制饼状图
        // ctx.arc(
        //     x , y   // 圆心坐标
        //     rad, //半径
        //     0 ,  //开始的弧度
        //     360 * Math.PI/180, //结束的弧度
        //     bool // false
        // )

        // 定义圆心
        var point = { x: 300, y: 300 }
        var rad = 200;

        // 编写一个函数 绘制弧形
        function drawCircle(start, end, color) {
            ctx.beginPath();
            ctx.moveTo(point.x, point.y);
            ctx.arc(
                point.x, point.y,
                rad,
                start,
                end,
                false
            )
            ctx.fillStyle = color;
            ctx.closePath();
            ctx.fill();
        }
        // 一月份
        // ctx.beginPath();
        // ctx.moveTo(point.x ,point.y);
        // ctx.arc(
        //     point.x , point.y ,
        //     rad ,
        //     0 ,
        //     360 * data[0].persent * Math.PI/180,
        //     false
        // )
        // ctx.fillStyle=data[0].color;
        // ctx.closePath();
        // ctx.fill();
        // 开始的弧度
        var startAngle = 0;
        // 结束的弧度
        var endAngle = 360 * data[0].persent * Math.PI / 180;
        drawCircle(
            startAngle,
            endAngle,
            data[0].color
        );

        // 二月份
        startAngle = endAngle;
        endAngle = startAngle + 360 * data[1].persent * Math.PI / 180;
        drawCircle(
            startAngle,
            endAngle,
            data[1].color
        );
        // 三月份
        startAngle = endAngle
        endAngle = startAngle + 360 * data[2].persent * Math.PI / 180
        drawCircle(
            startAngle,
            endAngle,
            data[2].color
        );

        // 四月份
        startAngle = endAngle
        endAngle = startAngle + 360 * data[3].persent * Math.PI / 180
        drawCircle(
            startAngle,
            endAngle,
            data[3].color
        );

        // 五月份
        startAngle = endAngle
        endAngle = startAngle + 360 * data[4].persent * Math.PI / 180
        drawCircle(
            startAngle,
            endAngle,
            data[4].color
        );




    </script>
</body>

</html>